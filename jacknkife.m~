seed=20200709;
rng(seed);
M=1000;
betas=zeros(M,1);
ctry='AUSTRIA';
ctrytbl=nustable(strcmp(nustable.ctry,ctry),:);
varlist={'SIZE','BM','fht','ivol','ret','roe','cash','invop','capex','ppe','rdratio','DIV','dy','close','lev','ADR','analyst','fxsale'};

candidate='SIZE';
position=find(strcmp(varlist,candidate));
addvar=varlist(varlist~=candidate);
n=length(varlist);

for i=1:M
k=floor(8+rand()*(n-8));
iscontrol=(1:n)~=position;
controlvar=varlist(iscontrol);
control=datasample(controlvar,k);  %sample controls

year=table2array(ctrytbl(:,'year'));
yeardummy=dummyvar(categorical(year));
yearlist=unique(year);

ynames={'io'};


y=table2array(ctrytbl(:,ynames));
X=[table2array(nustable(:,colnames)),yeardummy(:,2:end)];  %exclude one dummy
xnames=[canidate,control];
idx=~any(isnan(X), 2); %valid non-nan index
y=y(idx);
id=numid(idx);
X=X(idx,:); %if any of the columns is nan
time=year(idx);
io1=panel(id,time,y,X,'po','vartype','cluster','clusterid',id);
betas(i)=io1.eoef(1);  %candidate variable coef.
t=io1.coef/io1.stderr;
keep=t>1;
controlvar1=varlist(keep);



end;
